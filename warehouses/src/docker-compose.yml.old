---
services:
  #ici le container pour l'iot client MQTT
  objet:
    #image: python:3
    build: package
    networks:
      - objet
    volumes:
      - "$PWD/warehouse/app:/srv/:ro"
  #ici le container pour l'agent MQTT on utilise masquitto
  mosquitto:
    image: eclipse-mosquitto
    volumes:
      - "$PWD/warehouse/mosquitto:/mosquitto/config:ro"
    ports:
      - "1883:1883"
      - "9001:9001"
    networks:
      - "objet"
      - "entrepot"
  #ici le container pour le serveur de l'entrepot client MQTT
  entrepot:
    # image: python:3
    build: warehouse
    networks:
      - entrepot
      - datacenter
    volumes:
      - "$PWD/warehouse/app:/srv:ro"

networks:
  objet:
  entrepot:
  datacenter:
#
# volumes:
#   objet-data:
#   entrepot-data:
#   mosquitto-data:
